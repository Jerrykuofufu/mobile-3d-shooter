<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Gravity Courier Run</title>

<style>
:root{
  --bg:#eef6ff;
  --card:#ffffff;
  --ink:#111;
  --muted:#6b7280;
  --neon1:#a5f3fc;
  --neon2:#c7d2fe;
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont}
body{
  margin:0;
  background:linear-gradient(180deg,#eef6ff,#f8fbff);
  color:var(--ink);
}
.wrap{max-width:900px;margin:14px auto;padding:10px}
h1{margin:8px 0 6px;font-size:34px}
.chips{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
.chip{
  padding:6px 10px;border-radius:999px;
  border:1px dashed #c7d2fe;
  background:#fff;
  font-size:13px
}
.panel{
  background:var(--card);
  border-radius:18px;
  padding:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
}
.canvasWrap{
  position:relative;
  border-radius:16px;
  padding:10px;
  background:linear-gradient(135deg,var(--neon1),var(--neon2));
}
canvas{
  width:100%;
  height:220px;
  background:#eaf3ff;
  border-radius:12px;
  display:block;
}
.stats{display:flex;gap:14px;flex-wrap:wrap;margin:10px 0}
.stats span{color:var(--muted)}
.controls{display:flex;gap:8px;flex-wrap:wrap}
button,input{
  padding:10px 14px;
  border-radius:12px;
  border:1px dashed #c7d2fe;
  background:#fff;
  font-size:14px
}
button.primary{border:2px solid #93c5fd}
.tip{margin-top:10px;color:var(--muted);font-size:13px}
</style>
</head>

<body>
<div class="wrap">
  <h1>ğŸ›µ Gravity Courier Run</h1>

  <div class="chips">
    <div class="chip">é»ä¸€ä¸‹ç¿»è½‰é‡åŠ› âœ¨</div>
    <div class="chip">æ‰‹æ©Ÿè¶…é †</div>
    <div class="chip">Combo è¶Šé«˜åŠ åˆ†è¶Šé¦™ ğŸ•</div>
  </div>

  <div class="panel">
    <div class="canvasWrap">
      <canvas id="game" width="800" height="220"></canvas>
    </div>

    <div class="stats">
      <span>Score: <b id="score">0</b></span>
      <span>Best: <b id="best">0</b></span>
      <span>Combo: <b id="combo">0</b></span>
      <span>Speed: <b id="speed">1.0</b></span>
    </div>

    <div class="controls">
      <input id="name" placeholder="Name (â‰¤12)" maxlength="12">
      <button id="restart" class="primary">é‡æ–°é–‹å§‹</button>
      <button id="sfx">SFX: ON</button>
      <button id="bgm">BGM: OFF</button>
    </div>

    <div class="tip">
      æ“ä½œï¼šé»ä¸€ä¸‹ / ç©ºç™½éµ â†’ ç¿»è½‰é‡åŠ›ï¼ˆåœ°æ¿ â‡„ å¤©èŠ±æ¿ï¼‰<br>
      æç¤ºï¼šé‡æ–°é–‹å§‹å¾Œå…ˆã€Œå¾…æ©Ÿã€ï¼Œå†é»ä¸€ä¸‹æ‰æœƒè·‘ï¼ˆä¸æœƒç§’é–‹ï¼‰ğŸ˜º
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let gravity = 1;
let y = 160;
let vy = 0;
let score = 0;
let combo = 0;
let speed = 1;
let running = false;

let obstacles = [];

function reset(){
  y = 160;
  vy = 0;
  gravity = 1;
  score = 0;
  combo = 0;
  speed = 1;
  obstacles = [];
  running = false;
  updateUI();
}
reset();

function spawn(){
  obstacles.push({
    x: canvas.width,
    gapY: Math.random()*100+60
  });
}

function update(){
  if(!running) return;

  vy += gravity*0.6;
  y += vy;

  if(y>180){ y=180; vy=0; }
  if(y<20){ y=20; vy=0; }

  obstacles.forEach(o=>{
    o.x -= 3*speed;
    if(!o.passed && o.x<120){
      o.passed=true;
      score+=10;
      combo++;
      speed = 1 + combo*0.02;
    }
  });

  obstacles = obstacles.filter(o=>o.x>-40);

  if(Math.random()<0.02) spawn();

  updateUI();
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // player
  ctx.fillStyle="#111";
  ctx.fillRect(80,y-10,20,20);

  // obstacles
  ctx.fillStyle="#0f172a";
  obstacles.forEach(o=>{
    ctx.fillRect(o.x,0,20,o.gapY-30);
    ctx.fillRect(o.x,o.gapY+30,20,220);
  });
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();

function flip(){
  if(!running){ running=true; return; }
  gravity*=-1;
  vy = -vy*0.6;
}

document.addEventListener("click",flip);
document.addEventListener("keydown",e=>{
  if(e.code==="Space") flip();
});

document.getElementById("restart").onclick=reset;

function updateUI(){
  scoreEl.textContent=score;
  comboEl.textContent=combo;
  speedEl.textContent=speed.toFixed(1);
}

const scoreEl=document.getElementById("score");
const comboEl=document.getElementById("combo");
const speedEl=document.getElementById("speed");
</script>
</body>
</html>
