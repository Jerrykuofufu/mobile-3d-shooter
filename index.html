<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Gravity Courier Run</title>
  <style>
    :root{ --bg:#f6f7fb; --ink:#111; --muted:#666; --card:#fff; --line:#111; }
    html,body{ margin:0; padding:0; background:var(--bg); color:var(--ink); font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif; }
    .wrap{ max-width:900px; margin:14px auto; padding:0 12px; }
    h1{ margin:8px 0 6px; font-size:34px; letter-spacing:0.5px; display:flex; align-items:center; gap:10px; }
    .chip{ font-size:12px; color:#222; background:#e9eefc; padding:6px 10px; border-radius:999px; }
    .tip{ color:var(--muted); margin:0 0 10px; line-height:1.4; }
    .panel{ background:var(--card); border:1px solid #e7e7e7; border-radius:18px; padding:14px; box-shadow:0 8px 22px rgba(0,0,0,0.06); }
    canvas{ width:100%; height:auto; display:block; border:3px solid var(--line); border-radius:18px; background:linear-gradient(#ffffff,#fafafa); touch-action:manipulation; }
    .bar{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin-top:12px; }
    .stats{ display:flex; gap:14px; flex-wrap:wrap; align-items:center; font-variant-numeric:tabular-nums; }
    .stats b{ font-weight:800; }
    .btns{ display:flex; gap:8px; flex-wrap:wrap; }
    button{
      padding:10px 14px; border-radius:14px; border:2px solid #111;
      background:#fff; color:#111; font-size:15px; font-weight:700;
    }
    button:active{ transform:translateY(1px); }
    .toggle{ border-style:dashed; }
    .overlay{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background:rgba(0,0,0,0.45); z-index:30; padding:18px;
    }
    .card{
      width:min(560px, 92vw); background:#0f172a; color:#fff;
      border-radius:20px; padding:18px 16px; box-shadow:0 14px 40px rgba(0,0,0,0.35);
    }
    .card h2{ margin:0 0 8px; font-size:22px; }
    .card p{ margin:6px 0; line-height:1.5; color:#e5e7eb; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
    .primary{ background:#fff; color:#111; border-color:#fff; }
    .secondary{ background:transparent; color:#fff; border-color:rgba(255,255,255,0.55); }
    .tiny{ font-size:12px; color:#cbd5e1; margin-top:10px; }
    .hintline{ margin-top:10px; color:#444; font-size:13px; }
    .kbd{ font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; background:#111; color:#fff; padding:2px 6px; border-radius:8px; font-size:12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ğŸ›µ Gravity Courier Run <span class="chip">é»ä¸€ä¸‹ç¿»è½‰é‡åŠ›ï½œæ‰‹æ©Ÿè¶…é †</span></h1>
    <p class="tip">æ“ä½œï¼šé»ä¸€ä¸‹ / ç©ºç™½éµ = é‡åŠ›ç¿»è½‰ï¼ˆåœ°æ¿â‡„å¤©èŠ±æ¿ï¼‰ï½œé•·æŒ‰è¢å¹•ä¸éœ€è¦ï¼Œç´”å–®é»ç¯€å¥ ğŸ˜¼</p>

    <div class="panel">
      <canvas id="c" width="900" height="360" aria-label="game canvas"></canvas>

      <div class="bar">
        <div class="stats">
          <div>Score: <b id="score">0</b></div>
          <div>Best: <b id="best">0</b></div>
          <div>Combo: <b id="combo">0</b></div>
          <div>Speed: <b id="spd">1.0</b></div>
        </div>
        <div class="btns">
          <button id="restart">é‡æ–°é–‹å§‹</button>
          <button id="sfxBtn" class="toggle">SFX: ON</button>
          <button id="bgmBtn" class="toggle">BGM: OFF</button>
        </div>
      </div>
      <div class="hintline">å°æŠ€å·§ï¼šè²¼è‘—éšœç¤™ç‰©æ“¦éï¼ˆä¸è¦æ’åˆ°ï¼‰æœƒæ›´å®¹æ˜“ç´¯ç© Comboï¼ŒåŠ åˆ†å¾ˆé¦™ ğŸ•</div>
    </div>
  </div>

  <div class="overlay" id="overlay">
    <div class="card">
      <h2>ğŸ›µ Gravity Courier Run</h2>
      <p>ä½ æ˜¯å±‹é ‚å¤–é€å“¡ï¼Œé ã€Œé‡åŠ›ç¿»è½‰ã€é–ƒéšœç¤™ã€åƒæŠ«è–©ã€‚</p>
      <p>âœ… é»ä¸€ä¸‹ / <span class="kbd">Space</span>ï¼šé‡åŠ›ç¿»è½‰<br/>âœ… é è¿‘éšœç¤™æ“¦éï¼šCombo + åŠ åˆ†</p>
      <div class="row">
        <button class="primary" id="startBtn">é–‹å§‹</button>
        <button class="secondary" id="howBtn">å†çœ‹ä¸€æ¬¡èªªæ˜</button>
      </div>
      <div class="tiny">æç¤ºï¼šæ‰‹æ©Ÿç€è¦½å™¨é€šå¸¸è¦å…ˆé»ä¸€æ¬¡ç•«é¢ï¼ŒéŸ³æ•ˆæ‰æœƒå…è¨±æ’­æ”¾ï¼ˆç³»çµ±è¦å‰‡ï¼‰ã€‚</div>
    </div>
  </div>

<script>
(() => {
  // =======================
  // Helpers
  // =======================
  const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));
  const rand = (a,b)=>a+Math.random()*(b-a);
  const chance = (p)=>Math.random()<p;

  // =======================
  // Canvas + UI
  // =======================
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d', { alpha: false });

  const scoreEl = document.getElementById('score');
  const bestEl  = document.getElementById('best');
  const comboEl = document.getElementById('combo');
  const spdEl   = document.getElementById('spd');

  const restartBtn = document.getElementById('restart');
  const sfxBtn = document.getElementById('sfxBtn');
  const bgmBtn = document.getElementById('bgmBtn');

  const overlay = document.getElementById('overlay');
  const startBtn = document.getElementById('startBtn');
  const howBtn
